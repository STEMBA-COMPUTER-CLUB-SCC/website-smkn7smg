<?php

namespace App\Livewire;

use Livewire\Component;
use Livewire\WithPagination;

class Pageprestasi extends Component
{
    use WithPagination;

    public $contentPrestasi = [
        [
            'gambar' => '/assets/image/prestasi/band.png',
            'tanggal' => 'Sabtu, 8 Maret 2025',
            'judul' => 'Lomba Band Dies Natalis ke-6 Universitas Katolik Soegijapranata Tahun 2025',
            'deskripsi' => 'Setelah melewati beberapa tahapan penilaian dari dewan juri, Alhamdulillah 7 Line berhasil meraih prestasi terbaik sebagai Juara I. Selamat kepada Tim Band Stemba Semarang (7 Line) beserta pembimbingnya atas prestasi yang telah diraih. Berikut sebagian cuplikan liputan kegiatan tersebut.',
        ],
        [
            'gambar' => '/assets/image/prestasi/traspac.png',
            'tanggal' => 'Jumat, 01 Maret 2025',
            'judul' => 'Siswa SIJA Berprestasi di Ajang Traspac Competition Tahun 2025',
            'deskripsi' => 'PT Traspac Makmur Sejahtera adalah salah satu perusahaan yang bergerak di bidang teknologi informasi yang berkonsentrasi di bidang menciptakan budaya digital organisasi dengan peningkatan kompetensi digital SDM, perancangan kembali proses kerja berbasis digital, dan pemanfaatan optimal teknologi informasi Artificial intelligence, Internet of Things, Big Data.',
        ],
        [
            'gambar' => '/assets/image/prestasi/cj.png',
            'tanggal' => 'Selasa, 27 Februari 2025',
            'judul' => 'Prestasi Juara 2 di CyberJawara CTF 2024 kategori pelajar',
            'deskripsi' => 'Setelah melewati beberapa tahapan penilaian dari dewan juri, Alhamdulillah 7 Line berhasil meraih prestasi terbaik sebagai Juara I. Selamat kepada Tim Band Stemba Semarang (7 Line) beserta pembimbingnya atas prestasi yang telah diraih. Berikut sebagian cuplikan liputan kegiatan tersebut.',
        ],
        [
            'gambar' => '/assets/image/prestasi/band.png',
            'tanggal' => 'Sabtu, 8 Maret 2025',
            'judul' => 'ILomba Band Dies Natalis ke-6 Universitas Katolik Soegijapranata Tahun 2025',
            'deskripsi' => 'Setelah melewati beberapa tahapan penilaian dari dewan juri, Alhamdulillah 7 Line berhasil meraih prestasi terbaik sebagai Juara I. Selamat kepada Tim Band Stemba Semarang (7 Line) beserta pembimbingnya atas prestasi yang telah diraih. Berikut sebagian cuplikan liputan kegiatan tersebut.',
        ],
        [
            'gambar' => '/assets/image/prestasi/traspac.png',
            'tanggal' => 'Jumat, 01 Maret 2025',
            'judul' => 'Siswa SIJA Berprestasi di Ajang Traspac Competition Tahun 2025',
            'deskripsi' => 'PT Traspac Makmur Sejahtera adalah salah satu perusahaan yang bergerak di bidang teknologi informasi yang berkonsentrasi di bidang menciptakan budaya digital organisasi dengan peningkatan kompetensi digital SDM, perancangan kembali proses kerja berbasis digital, dan pemanfaatan optimal teknologi informasi Artificial intelligence, Internet of Things, Big Data.',
        ],
        [
            'gambar' => '/assets/image/prestasi/cj.png',
            'tanggal' => 'Selasa, 27 Februari 2025',
            'judul' => 'Prestasi Juara 2 di CyberJawara CTF 2024 kategori pelajar',
            'deskripsi' => 'Setelah melewati beberapa tahapan penilaian dari dewan juri, Alhamdulillah 7 Line berhasil meraih prestasi terbaik sebagai Juara I. Selamat kepada Tim Band Stemba Semarang (7 Line) beserta pembimbingnya atas prestasi yang telah diraih. Berikut sebagian cuplikan liputan kegiatan tersebut.',
        ],
        [
            'gambar' => '/assets/image/prestasi/band.png',
            'tanggal' => 'Sabtu, 8 Maret 2025',
            'judul' => 'Lomba Band Dies Natalis ke-6 Universitas Katolik Soegijapranata Tahun 2025',
            'deskripsi' => 'Setelah melewati beberapa tahapan penilaian dari dewan juri, Alhamdulillah 7 Line berhasil meraih prestasi terbaik sebagai Juara I. Selamat kepada Tim Band Stemba Semarang (7 Line) beserta pembimbingnya atas prestasi yang telah diraih. Berikut sebagian cuplikan liputan kegiatan tersebut.',
        ],
        [
            'gambar' => '/assets/image/prestasi/traspac.png',
            'tanggal' => 'Jumat, 01 Maret 2025',
            'judul' => 'Siswa SIJA Berprestasi di Ajang Traspac Competition Tahun 2025',
            'deskripsi' => 'PT Traspac Makmur Sejahtera adalah salah satu perusahaan yang bergerak di bidang teknologi informasi yang berkonsentrasi di bidang menciptakan budaya digital organisasi dengan peningkatan kompetensi digital SDM, perancangan kembali proses kerja berbasis digital, dan pemanfaatan optimal teknologi informasi Artificial intelligence, Internet of Things, Big Data.',
        ],
        [
            'gambar' => '/assets/image/prestasi/cj.png',
            'tanggal' => 'Selasa, 27 Februari 2025',
            'judul' => 'Prestasi Juara 2 di CyberJawara CTF 2024 kategori pelajar',
            'deskripsi' => 'Setelah melewati beberapa tahapan penilaian dari dewan juri, Alhamdulillah 7 Line berhasil meraih prestasi terbaik sebagai Juara I. Selamat kepada Tim Band Stemba Semarang (7 Line) beserta pembimbingnya atas prestasi yang telah diraih. Berikut sebagian cuplikan liputan kegiatan tersebut.',
        ],
        [
            'gambar' => '/assets/image/prestasi/band.png',
            'tanggal' => 'Sabtu, 8 Maret 2025',
            'judul' => 'Lomba Band Dies Natalis ke-6 Universitas Katolik Soegijapranata Tahun 2025',
            'deskripsi' => 'Setelah melewati beberapa tahapan penilaian dari dewan juri, Alhamdulillah 7 Line berhasil meraih prestasi terbaik sebagai Juara I. Selamat kepada Tim Band Stemba Semarang (7 Line) beserta pembimbingnya atas prestasi yang telah diraih. Berikut sebagian cuplikan liputan kegiatan tersebut.',
        ],
        [
            'gambar' => '/assets/image/prestasi/traspac.png',
            'tanggal' => 'Jumat, 01 Maret 2025',
            'judul' => 'Siswa SIJA Berprestasi di Ajang Traspac Competition Tahun 2025',
            'deskripsi' => 'PT Traspac Makmur Sejahtera adalah salah satu perusahaan yang bergerak di bidang teknologi informasi yang berkonsentrasi di bidang menciptakan budaya digital organisasi dengan peningkatan kompetensi digital SDM, perancangan kembali proses kerja berbasis digital, dan pemanfaatan optimal teknologi informasi Artificial intelligence, Internet of Things, Big Data.',
        ],
        [
            'gambar' => '/assets/image/prestasi/cj.png',
            'tanggal' => 'Selasa, 27 Februari 2025',
            'judul' => 'Prestasi Juara 2 di CyberJawara CTF 2024 kategori pelajar',
            'deskripsi' => 'Setelah melewati beberapa tahapan penilaian dari dewan juri, Alhamdulillah 7 Line berhasil meraih prestasi terbaik sebagai Juara I. Selamat kepada Tim Band Stemba Semarang (7 Line) beserta pembimbingnya atas prestasi yang telah diraih. Berikut sebagian cuplikan liputan kegiatan tersebut.',
        ],
        [
            'gambar' => '/assets/image/prestasi/band.png',
            'tanggal' => 'Sabtu, 8 Maret 2025',
            'judul' => 'Lomba Band Dies Natalis ke-6 Universitas Katolik Soegijapranata Tahun 2025',
            'deskripsi' => 'Setelah melewati beberapa tahapan penilaian dari dewan juri, Alhamdulillah 7 Line berhasil meraih prestasi terbaik sebagai Juara I. Selamat kepada Tim Band Stemba Semarang (7 Line) beserta pembimbingnya atas prestasi yang telah diraih. Berikut sebagian cuplikan liputan kegiatan tersebut.',
        ],
        [
            'gambar' => '/assets/image/prestasi/traspac.png',
            'tanggal' => 'Jumat, 01 Maret 2025',
            'judul' => 'Siswa SIJA Berprestasi di Ajang Traspac Competition Tahun 2025',
            'deskripsi' => 'PT Traspac Makmur Sejahtera adalah salah satu perusahaan yang bergerak di bidang teknologi informasi yang berkonsentrasi di bidang menciptakan budaya digital organisasi dengan peningkatan kompetensi digital SDM, perancangan kembali proses kerja berbasis digital, dan pemanfaatan optimal teknologi informasi Artificial intelligence, Internet of Things, Big Data.',
        ],
        [
            'gambar' => '/assets/image/prestasi/cj.png',
            'tanggal' => 'Selasa, 27 Februari 2025',
            'judul' => 'Prestasi Juara 2 di CyberJawara CTF 2024 kategori pelajar',
            'deskripsi' => 'Setelah melewati beberapa tahapan penilaian dari dewan juri, Alhamdulillah 7 Line berhasil meraih prestasi terbaik sebagai Juara I. Selamat kepada Tim Band Stemba Semarang (7 Line) beserta pembimbingnya atas prestasi yang telah diraih. Berikut sebagian cuplikan liputan kegiatan tersebut.',
        ],
        [
            'gambar' => '/assets/image/prestasi/band.png',
            'tanggal' => 'Sabtu, 8 Maret 2025',
            'judul' => 'Lomba Band Dies Natalis ke-6 Universitas Katolik Soegijapranata Tahun 2025',
            'deskripsi' => 'Setelah melewati beberapa tahapan penilaian dari dewan juri, Alhamdulillah 7 Line berhasil meraih prestasi terbaik sebagai Juara I. Selamat kepada Tim Band Stemba Semarang (7 Line) beserta pembimbingnya atas prestasi yang telah diraih. Berikut sebagian cuplikan liputan kegiatan tersebut.',
        ],
        [
            'gambar' => '/assets/image/prestasi/traspac.png',
            'tanggal' => 'Jumat, 01 Maret 2025',
            'judul' => 'Siswa SIJA Berprestasi di Ajang Traspac Competition Tahun 2025',
            'deskripsi' => 'PT Traspac Makmur Sejahtera adalah salah satu perusahaan yang bergerak di bidang teknologi informasi yang berkonsentrasi di bidang menciptakan budaya digital organisasi dengan peningkatan kompetensi digital SDM, perancangan kembali proses kerja berbasis digital, dan pemanfaatan optimal teknologi informasi Artificial intelligence, Internet of Things, Big Data.',
        ],
        [
            'gambar' => '/assets/image/prestasi/cj.png',
            'tanggal' => 'Selasa, 27 Februari 2025',
            'judul' => 'Prestasi Juara 2 di CyberJawara CTF 2024 kategori pelajar',
            'deskripsi' => 'Setelah melewati beberapa tahapan penilaian dari dewan juri, Alhamdulillah 7 Line berhasil meraih prestasi terbaik sebagai Juara I. Selamat kepada Tim Band Stemba Semarang (7 Line) beserta pembimbingnya atas prestasi yang telah diraih. Berikut sebagian cuplikan liputan kegiatan tersebut.',
        ],
        [
            'gambar' => '/assets/image/prestasi/band.png',
            'tanggal' => 'Sabtu, 8 Maret 2025',
            'judul' => 'Lomba Band Dies Natalis ke-6 Universitas Katolik Soegijapranata Tahun 2025',
            'deskripsi' => 'Setelah melewati beberapa tahapan penilaian dari dewan juri, Alhamdulillah 7 Line berhasil meraih prestasi terbaik sebagai Juara I. Selamat kepada Tim Band Stemba Semarang (7 Line) beserta pembimbingnya atas prestasi yang telah diraih. Berikut sebagian cuplikan liputan kegiatan tersebut.',
        ],
        [
            'gambar' => '/assets/image/prestasi/traspac.png',
            'tanggal' => 'Jumat, 01 Maret 2025',
            'judul' => 'Siswa SIJA Berprestasi di Ajang Traspac Competition Tahun 2025',
            'deskripsi' => 'PT Traspac Makmur Sejahtera adalah salah satu perusahaan yang bergerak di bidang teknologi informasi yang berkonsentrasi di bidang menciptakan budaya digital organisasi dengan peningkatan kompetensi digital SDM, perancangan kembali proses kerja berbasis digital, dan pemanfaatan optimal teknologi informasi Artificial intelligence, Internet of Things, Big Data.',
        ],
        [
            'gambar' => '/assets/image/prestasi/cj.png',
            'tanggal' => 'Selasa, 27 Februari 2025',
            'judul' => 'Prestasi Juara 2 di CyberJawara CTF 2024 kategori pelajar',
            'deskripsi' => 'Setelah melewati beberapa tahapan penilaian dari dewan juri, Alhamdulillah 7 Line berhasil meraih prestasi terbaik sebagai Juara I. Selamat kepada Tim Band Stemba Semarang (7 Line) beserta pembimbingnya atas prestasi yang telah diraih. Berikut sebagian cuplikan liputan kegiatan tersebut.',
        ],
        [
            'gambar' => '/assets/image/prestasi/band.png',
            'tanggal' => 'Sabtu, 8 Maret 2025',
            'judul' => 'Lomba Band Dies Natalis ke-6 Universitas Katolik Soegijapranata Tahun 2025',
            'deskripsi' => 'Setelah melewati beberapa tahapan penilaian dari dewan juri, Alhamdulillah 7 Line berhasil meraih prestasi terbaik sebagai Juara I. Selamat kepada Tim Band Stemba Semarang (7 Line) beserta pembimbingnya atas prestasi yang telah diraih. Berikut sebagian cuplikan liputan kegiatan tersebut.',
        ],
        [
            'gambar' => '/assets/image/prestasi/traspac.png',
            'tanggal' => 'Jumat, 01 Maret 2025',
            'judul' => 'Siswa SIJA Berprestasi di Ajang Traspac Competition Tahun 2025',
            'deskripsi' => 'PT Traspac Makmur Sejahtera adalah salah satu perusahaan yang bergerak di bidang teknologi informasi yang berkonsentrasi di bidang menciptakan budaya digital organisasi dengan peningkatan kompetensi digital SDM, perancangan kembali proses kerja berbasis digital, dan pemanfaatan optimal teknologi informasi Artificial intelligence, Internet of Things, Big Data.',
        ],
        [
            'gambar' => '/assets/image/prestasi/cj.png',
            'tanggal' => 'Selasa, 27 Februari 2025',
            'judul' => 'Prestasi Juara 2 di CyberJawara CTF 2024 kategori pelajar',
            'deskripsi' => 'Setelah melewati beberapa tahapan penilaian dari dewan juri, Alhamdulillah 7 Line berhasil meraih prestasi terbaik sebagai Juara I. Selamat kepada Tim Band Stemba Semarang (7 Line) beserta pembimbingnya atas prestasi yang telah diraih. Berikut sebagian cuplikan liputan kegiatan tersebut.',
        ],
        [
            'gambar' => '/assets/image/prestasi/band.png',
            'tanggal' => 'Sabtu, 8 Maret 2025',
            'judul' => 'Lomba Band Dies Natalis ke-6 Universitas Katolik Soegijapranata Tahun 2025',
            'deskripsi' => 'Setelah melewati beberapa tahapan penilaian dari dewan juri, Alhamdulillah 7 Line berhasil meraih prestasi terbaik sebagai Juara I. Selamat kepada Tim Band Stemba Semarang (7 Line) beserta pembimbingnya atas prestasi yang telah diraih. Berikut sebagian cuplikan liputan kegiatan tersebut.',
        ],
        [
            'gambar' => '/assets/image/prestasi/traspac.png',
            'tanggal' => 'Jumat, 01 Maret 2025',
            'judul' => 'Siswa SIJA Berprestasi di Ajang Traspac Competition Tahun 2025',
            'deskripsi' => 'PT Traspac Makmur Sejahtera adalah salah satu perusahaan yang bergerak di bidang teknologi informasi yang berkonsentrasi di bidang menciptakan budaya digital organisasi dengan peningkatan kompetensi digital SDM, perancangan kembali proses kerja berbasis digital, dan pemanfaatan optimal teknologi informasi Artificial intelligence, Internet of Things, Big Data.',
        ],
        [
            'gambar' => '/assets/image/prestasi/cj.png',
            'tanggal' => 'Selasa, 27 Februari 2025',
            'judul' => 'Prestasi Juara 2 di CyberJawara CTF 2024 kategori pelajar',
            'deskripsi' => 'Setelah melewati beberapa tahapan penilaian dari dewan juri, Alhamdulillah 7 Line berhasil meraih prestasi terbaik sebagai Juara I. Selamat kepada Tim Band Stemba Semarang (7 Line) beserta pembimbingnya atas prestasi yang telah diraih. Berikut sebagian cuplikan liputan kegiatan tersebut.',
        ],
        [
            'gambar' => '/assets/image/prestasi/band.png',
            'tanggal' => 'Sabtu, 8 Maret 2025',
            'judul' => 'Lomba Band Dies Natalis ke-6 Universitas Katolik Soegijapranata Tahun 2025',
            'deskripsi' => 'Setelah melewati beberapa tahapan penilaian dari dewan juri, Alhamdulillah 7 Line berhasil meraih prestasi terbaik sebagai Juara I. Selamat kepada Tim Band Stemba Semarang (7 Line) beserta pembimbingnya atas prestasi yang telah diraih. Berikut sebagian cuplikan liputan kegiatan tersebut.',
        ],
        [
            'gambar' => '/assets/image/prestasi/traspac.png',
            'tanggal' => 'Jumat, 01 Maret 2025',
            'judul' => 'Siswa SIJA Berprestasi di Ajang Traspac Competition Tahun 2025',
            'deskripsi' => 'PT Traspac Makmur Sejahtera adalah salah satu perusahaan yang bergerak di bidang teknologi informasi yang berkonsentrasi di bidang menciptakan budaya digital organisasi dengan peningkatan kompetensi digital SDM, perancangan kembali proses kerja berbasis digital, dan pemanfaatan optimal teknologi informasi Artificial intelligence, Internet of Things, Big Data.',
        ],
        [
            'gambar' => '/assets/image/prestasi/cj.png',
            'tanggal' => 'Selasa, 27 Februari 2025',
            'judul' => 'Prestasi Juara 2 di CyberJawara CTF 2024 kategori pelajar',
            'deskripsi' => 'Setelah melewati beberapa tahapan penilaian dari dewan juri, Alhamdulillah 7 Line berhasil meraih prestasi terbaik sebagai Juara I. Selamat kepada Tim Band Stemba Semarang (7 Line) beserta pembimbingnya atas prestasi yang telah diraih. Berikut sebagian cuplikan liputan kegiatan tersebut.',
        ],
        [
            'gambar' => '/assets/image/prestasi/band.png',
            'tanggal' => 'Sabtu, 8 Maret 2025',
            'judul' => 'Lomba Band Dies Natalis ke-6 Universitas Katolik Soegijapranata Tahun 2025',
            'deskripsi' => 'Setelah melewati beberapa tahapan penilaian dari dewan juri, Alhamdulillah 7 Line berhasil meraih prestasi terbaik sebagai Juara I. Selamat kepada Tim Band Stemba Semarang (7 Line) beserta pembimbingnya atas prestasi yang telah diraih. Berikut sebagian cuplikan liputan kegiatan tersebut.',
        ],
        [
            'gambar' => '/assets/image/prestasi/traspac.png',
            'tanggal' => 'Jumat, 01 Maret 2025',
            'judul' => 'Siswa SIJA Berprestasi di Ajang Traspac Competition Tahun 2025',
            'deskripsi' => 'PT Traspac Makmur Sejahtera adalah salah satu perusahaan yang bergerak di bidang teknologi informasi yang berkonsentrasi di bidang menciptakan budaya digital organisasi dengan peningkatan kompetensi digital SDM, perancangan kembali proses kerja berbasis digital, dan pemanfaatan optimal teknologi informasi Artificial intelligence, Internet of Things, Big Data.',
        ],
        [
            'gambar' => '/assets/image/prestasi/cj.png',
            'tanggal' => 'Selasa, 27 Februari 2025',
            'judul' => 'Prestasi Juara 2 di CyberJawara CTF 2024 kategori pelajar',
            'deskripsi' => 'Setelah melewati beberapa tahapan penilaian dari dewan juri, Alhamdulillah 7 Line berhasil meraih prestasi terbaik sebagai Juara I. Selamat kepada Tim Band Stemba Semarang (7 Line) beserta pembimbingnya atas prestasi yang telah diraih. Berikut sebagian cuplikan liputan kegiatan tersebut.',
        ],
        [
            'gambar' => '/assets/image/prestasi/band.png',
            'tanggal' => 'Sabtu, 8 Maret 2025',
            'judul' => 'Lomba Band Dies Natalis ke-6 Universitas Katolik Soegijapranata Tahun 2025',
            'deskripsi' => 'Setelah melewati beberapa tahapan penilaian dari dewan juri, Alhamdulillah 7 Line berhasil meraih prestasi terbaik sebagai Juara I. Selamat kepada Tim Band Stemba Semarang (7 Line) beserta pembimbingnya atas prestasi yang telah diraih. Berikut sebagian cuplikan liputan kegiatan tersebut.',
        ],
        [
            'gambar' => '/assets/image/prestasi/traspac.png',
            'tanggal' => 'Jumat, 01 Maret 2025',
            'judul' => 'Siswa SIJA Berprestasi di Ajang Traspac Competition Tahun 2025',
            'deskripsi' => 'PT Traspac Makmur Sejahtera adalah salah satu perusahaan yang bergerak di bidang teknologi informasi yang berkonsentrasi di bidang menciptakan budaya digital organisasi dengan peningkatan kompetensi digital SDM, perancangan kembali proses kerja berbasis digital, dan pemanfaatan optimal teknologi informasi Artificial intelligence, Internet of Things, Big Data.',
        ],
        [
            'gambar' => '/assets/image/prestasi/cj.png',
            'tanggal' => 'Selasa, 27 Februari 2025',
            'judul' => 'Prestasi Juara 2 di CyberJawara CTF 2024 kategori pelajar',
            'deskripsi' => 'Setelah melewati beberapa tahapan penilaian dari dewan juri, Alhamdulillah 7 Line berhasil meraih prestasi terbaik sebagai Juara I. Selamat kepada Tim Band Stemba Semarang (7 Line) beserta pembimbingnya atas prestasi yang telah diraih. Berikut sebagian cuplikan liputan kegiatan tersebut.',
        ]
    ];
    
    public $perPage = 6;
    public $lastDirection = 'forward';
    public $search = '';
    public $selectedCategories = [];
    public $isMobile = false; 

    private function parseIndonesianDate($dateString)
    {
        $dateParts = explode(', ', $dateString);
        $dateWithoutDay = $dateParts[1];

        $months = [
            'Januari' => 'January',
            'Februari' => 'February',
            'Maret' => 'March',
            'April' => 'April',
            'Mei' => 'May',
            'Juni' => 'June',
            'Juli' => 'July',
            'Agustus' => 'August',
            'September' => 'September',
            'Oktober' => 'October',
            'November' => 'November',
            'Desember' => 'December',
        ];

        [$day, $month, $year] = explode(' ', $dateWithoutDay);
        $monthEnglish = $months[$month];
        $parsedDate = "$day $monthEnglish $year";

        return strtotime($parsedDate);
    }

    public function updatingSearch()
    {
        $this->resetPage();
    }

    public function toggleCategory($category)
    {
        if (in_array($category, $this->selectedCategories)) {
            $this->selectedCategories = array_diff($this->selectedCategories, [$category]);
        } else {
            $this->selectedCategories[] = $category;
        }
        $this->resetPage();
    }

    public function searchPrestasi()
    {
        $this->resetPage();
    }

    public function setDeviceType($isMobile)
    {
        $this->isMobile = $isMobile;
        $this->perPage = $this->isMobile ? 3 : 6; 
        $this->resetPage(); 
    }

    public function render()
    {
        $sortedPrestasi = collect($this->contentPrestasi)
            ->sortByDesc(function ($item) {
                return $this->parseIndonesianDate($item['tanggal']);
            })
            ->filter(function ($item) {
                $matchesSearch = empty($this->search) || stripos($item['judul'], $this->search) !== false;
                $matchesCategory = empty($this->selectedCategories) || in_array($item['kategori'], $this->selectedCategories);
                return $matchesSearch && $matchesCategory;
            })
            ->values();

        $total = $sortedPrestasi->count();
        $totalPages = (int) ceil($total / $this->perPage);
        $currentPage = $this->getPage();
        $paginatedPrestasi = $sortedPrestasi
            ->slice(($currentPage - 1) * $this->perPage, $this->perPage)
            ->values();

        $maxPagesToShow = 4;
        if ($totalPages <= $maxPagesToShow) {
            $startPage = 1;
            $endPage = $totalPages;
        } else {
            if ($this->lastDirection === 'forward') {
                $startPage = max(1, $currentPage - 2);
                $endPage = min($totalPages, $startPage + $maxPagesToShow - 1);
                if ($endPage - $startPage + 1 < $maxPagesToShow) {
                    $startPage = max(1, $endPage - $maxPagesToShow + 1);
                }
                if ($currentPage <= 2) {
                    $startPage = 1;
                    $endPage = $maxPagesToShow;
                }
            } else {
                $startPage = max(1, $currentPage - 1);
                $endPage = min($totalPages, $startPage + $maxPagesToShow - 1);
                if ($endPage - $startPage + 1 < $maxPagesToShow) {
                    $startPage = max(1, $endPage - $maxPagesToShow + 1);
                }
            }
        }

        return view('livewire.pageprestasi', [
            'paginatedPrestasi' => $paginatedPrestasi,
            'total' => $total,
            'currentPage' => $currentPage,
            'totalPages' => $totalPages,
            'startPage' => $startPage,
            'endPage' => $endPage,
            'selectedCategories' => $this->selectedCategories,
        ]);
    }

    public function nextPage()
    {
        $filteredPrestasi = collect($this->contentPrestasi)
            ->filter(function ($item) {
                $matchesSearch = empty($this->search) || stripos($item['judul'], $this->search) !== false;
                $matchesCategory = empty($this->selectedCategories) || in_array($item['kategori'], $this->selectedCategories);
                return $matchesSearch && $matchesCategory;
            })
            ->values();

        $totalPages = (int) ceil($filteredPrestasi->count() / $this->perPage);
        if ($this->getPage() < $totalPages) {
            $this->lastDirection = 'forward';
            $this->setPage($this->getPage() + 1);
        }
    }

    public function previousPage()
    {
        if ($this->getPage() > 1) {
            $this->lastDirection = 'backward';
            $this->setPage($this->getPage() - 1);
        }
    }

    public function gotoPage($page)
    {
        $filteredPrestasi = collect($this->contentPrestasi)
            ->filter(function ($item) {
                $matchesSearch = empty($this->search) || stripos($item['judul'], $this->search) !== false;
                $matchesCategory = empty($this->selectedCategories) || in_array($item['kategori'], $this->selectedCategories);
                return $matchesSearch && $matchesCategory;
            })
            ->values();

        $totalPages = (int) ceil($filteredPrestasi->count() / $this->perPage);
        if ($page >= 1 && $page <= $totalPages) {
            $this->setPage($page);
        }
    }
}